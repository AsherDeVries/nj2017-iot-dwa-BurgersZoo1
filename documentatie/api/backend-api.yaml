openapi: 3.0.0
info:
  title: Backend
  version: 0.0.1
  description: >-
    Dit is de api die wordt aangeboden door de backend voor gebruik door de
    gateway.
tags:
  - name: Pootje
    description: Alle api calls die bij pootje horen.
paths:
  /pootje:
    post:
      tags:
        - Pootje
      summary: Aanmaken van nieuw pootje
      description: >-
        Aanmaken van een nieuw pootje. Response bevat het nieuw aangemaakte poot
        object. 
      deprecated: false
      responses:
        '201':
          description: Nieuwe poot aangemaakt
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Poot'
        '500':
          description: Fout bij het aanmaken van een nieuw pootje
  '/pootje/{pootid}/config':
    get:
      tags:
      - Pootje
      summary: Opvragen configuratie pootje
      description: Het opvragen van de configuratie van een specifiek pootje
      deprecated: false
      requestBody:
        content:
          string:
            schema:
              type: string
      parameters:
        - in: path
          name: pootid
          schema:
            type: integer
          required: true
          description: 'ID van de poot, waarvan de config wordt opgevraagd'
      responses:
        '200':
          description: De configuratie van de poot
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Config'
        '404':
          description: Configuratie niet gevonden
        '500':
          description: Configuratie kon niet worden opgehaald
  '/pootje/{pootid}/logging':
    post:
      tags:
      - Pootje
      summary: Opslaan log data
      description: Verwerken van de logdata die van de pootjes komt.
      deprecated: false
      requestBody:
        content:
          poot:
            schema:
              $ref: '#/components/schemas/Logging'
      parameters:
        - in: path
          name: pootid
          schema:
            type: integer
          required: true
          description: poot id
      responses:
        '201':
          description: Logging opgelsagen
        '404':
          description: Poot kon niet worden gevonden
        '500':
          description: Logging kon niet worden opgeslagen
  '/pootje/{pootid}/scan/':
    post:
      tags:
      - Pootje
      summary: Scan data van pootje
      description: Verwerken van de ranger die bij een bepaalde poot komt.
      deprecated: false
      requestBody:
        content:
          pas:
            schema:
              $ref: '#/components/schemas/NFC'
      parameters:
        - in: path
          name: pootid
          schema:
            type: integer
          required: true
          description: ID van de poot die gescand is
      responses:
        '201':
          description: Poot succesvol gescand
        '400':
          description: Ranger bestaat niet
        '404':
          description: Poot kan niet gevonden worden
        '500':
          description: Poot scan niet opgeslagen
components:
  schemas:
    Config:
      description: Poot configuratie
      properties:
        poot:
          $ref: '#/components/schemas/Poot'
        audio:
          items:
            $ref: '#/components/schemas/Media'
    Media:
      description: Media items
      properties:
        id:
          type: integer
          description: id van audo object
        url:
          type: string
          description: link naar media object
        type:
          type: string
          enum:
            - weetje
            - diergeluid
    Poot:
      description: Poot/paal in de dierentuin
      properties:
        id:
          type: integer
          description: id van de paal
    Logging:
      description: Logging data
      properties:
        poot:
          $ref: '#/components/schemas/Poot'
        timestamp:
          type: string
          format: timestamp
          description: Timestamp of the loggin values
    NFC:
      description: Ranger NFC kaart
      properties:
        id:
          type: integer
          description: id van de ranger

